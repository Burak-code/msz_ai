<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSZ AI - Akıllı Asistan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: #0f172a;
            color: #f8fafc;
            height: 100vh;
            overflow: hidden;
        }

        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-container {
            height: calc(100vh - 180px);
        }

        .message-appear {
            animation: fadeInScale 0.2s ease-out forwards;
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }

        .math-step {
            border-left: 2px solid #3b82f6;
            padding-left: 10px;
            margin: 8px 0;
            font-size: 0.9rem;
            color: #cbd5e1;
            line-height: 1.5;
        }
    </style>
    <link rel="icon" type="image/png" href="favicon.png">

</head>
<body class="flex flex-col items-center justify-center p-4">

    <header class="w-full max-w-4xl flex items-center justify-between mb-4 px-2">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-900/20">
                <i class="fas fa-brain text-xl text-white"></i>
            </div>
            <div>
                <h1 class="font-bold text-xl tracking-tight text-white">MSZ AI <span class="text-blue-500 text-sm font-normal">v3.2</span></h1>
                <p class="text-xs text-slate-400">Tarafsız & Akıllı Modül</p>
            </div>
        </div>
        <div class="flex gap-2">
            <button id="clearChat" class="p-2 hover:bg-slate-800 rounded-lg transition-colors text-slate-400">
                <i class="fas fa-redo-alt"></i>
            </button>
        </div>
    </header>

    <main class="w-full max-w-4xl glass rounded-3xl flex flex-col overflow-hidden shadow-2xl">
        <div id="chatBox" class="chat-container overflow-y-auto p-6 space-y-6">
            <!-- Tanıtım Mesajı -->
        </div>

        <div class="p-4 bg-slate-900/50 border-t border-slate-800">
            <div class="flex items-center gap-2 max-w-3xl mx-auto bg-slate-800 p-2 rounded-2xl focus-within:ring-2 ring-blue-500 transition-all">
                <input type="text" id="userInput" placeholder="Problemi veya sorunuzu buraya yazın..." 
                    class="flex-1 bg-transparent border-none focus:outline-none p-2 text-sm text-white">
                <button id="sendBtn" class="bg-blue-600 hover:bg-blue-500 text-white w-10 h-10 rounded-xl flex items-center justify-center transition-all">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </main>

    <footer class="mt-4 text-slate-500 text-[11px]">
        Geliştirici: Burak Bileç | <a href="https://www.instagram.com/burak_msz" target="_blank" style="color: blue;">İnstagram</a>


    </footer>

    <script>
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');

        function showWelcomeMessage() {
            const welcomeHtml = `
                <div class="flex flex-col gap-2 max-w-[85%] message-appear">
                    <div class="bg-slate-800 p-4 rounded-2xl rounded-tl-none border border-slate-700">
                        <p class="text-sm leading-relaxed">
                            Merhaba! Ben <strong>MSZ AI</strong>. Burak Bileç tarafından geliştirilen tarafsız bir yapay zeka modeliyim.<br><br>
                            Genel bilgi araştırması yapabilir, karmaşık matematik problemlerini analiz edebilir ve seninle sohbet edebilirim.<br><br>
                            <strong>Nasıl yardımcı olabilirim?</strong>
                        </p>
                    </div>
                    <span class="text-[9px] text-slate-500 px-1 uppercase tracking-widest">MSZ AI • Sistem</span>
                </div>
            `;
            chatBox.innerHTML = welcomeHtml;
        }

        // Akıllı Yanıt ve Problem Motoru
        function solveInput(input) {
            const low = input.toLowerCase().trim();
            
            // 1. KİMLİK SORGULARI
            if (low.includes('kimsin') || low.includes('seni kim yaptı') || low.includes('adın ne')) {
                return `Ben <strong>MSZ AI</strong>. Burak Bileç tarafından Gemini, Deepseek ve ChatGPT gibi modern mimari prensiplerle geliştirildim. Amacım bilgi sunmak ve problem çözmektir.`;
            }

            // 2. SELAMLAŞMA
            const greetings = ['merhaba', 'selam', 'hey', 'naber', 'nasılsın'];
            if (greetings.some(g => low === g)) {
                return "Merhaba! Size nasıl yardımcı olabilirim? Bir konu hakkında bilgi alabilir veya bir problem sorabilirsiniz.";
            }

            // 3. MATEMATİKSEL ANALİZ (Dinamik)
            // Kar/Zarar/Türev Problemleri için Gelişmiş Tanıma
            if (low.includes('kar fonksiyonu') || low.includes('k(x)') || (low.includes('maksimum') && low.includes('fonksiyon'))) {
                return `
                    <div class="font-bold mb-2">Matematiksel Analiz Sonucu:</div>
                    <div class="math-step"><strong>Adım 1:</strong> Fonksiyonun yapısı analiz ediliyor. Verilen K(x) denklemi türevi alınarak ekstremum noktaları bulunur.</div>
                    <div class="math-step"><strong>Adım 2:</strong> Maksimum değer için f'(x)=0 denklemi çözülür. (Örn: -6x² + 60x + 100 = 0)</div>
                    <div class="math-step"><strong>Adım 3:</strong> Bulunan x değeri fonksiyonda yerine konarak maksimum kar hesaplanır.</div>
                    <div class="math-step"><strong>Adım 4:</strong> Kökler arası işaret tablosu yapılarak fonksiyonun pozitif (karlı) olduğu aralık belirlenir.</div>
                    <div class="mt-2 pt-2 border-t border-slate-700 font-bold text-blue-400">Not: Kesin sonuç için denklemdeki tüm katsayıların tam girilmesi gerekir.</div>
                `;
            }

            // Basit Hesaplamalar
            const mathRegex = /^[0-9+\-*/().\s]+$/;
            if (mathRegex.test(input) && /[+\-*/]/.test(input)) {
                try {
                    const res = eval(input);
                    return `İşlem sonucu: <strong>${res}</strong>`;
                } catch(e) { return null; }
            }
            
            return null;
        }

        async function fetchWikipedia(query) {
            try {
                const response = await fetch(`https://tr.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`);
                if (response.ok) {
                    const data = await response.json();
                    return data.extract || null;
                }
                return null;
            } catch (error) { return null; }
        }

        function addMessage(content, role = 'bot', isHtml = false) {
            const div = document.createElement('div');
            div.className = `flex flex-col gap-1 ${role === 'user' ? 'items-end ml-auto' : 'items-start mr-auto'} max-w-[85%] message-appear`;
            
            div.innerHTML = `
                <div class="${role === 'user' ? 'bg-blue-700' : 'bg-slate-800'} p-3 px-4 rounded-2xl ${role === 'user' ? 'rounded-tr-none' : 'rounded-tl-none'} border border-white/5 shadow-lg">
                    <p class="text-sm leading-relaxed">${isHtml ? content : content.replace(/\n/g, '<br>')}</p>
                </div>
                <span class="text-[9px] text-slate-500 px-1 uppercase tracking-widest">${role === 'user' ? 'Kullanıcı' : 'MSZ AI'}</span>
            `;
            
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        async function handleAction() {
            const val = userInput.value.trim();
            if (!val) return;

            addMessage(val, 'user');
            userInput.value = '';

            // Önce yerel zeka (Matematik/Kimlik)
            const localResponse = solveInput(val);
            if (localResponse) {
                setTimeout(() => addMessage(localResponse, 'bot', true), 500);
                return;
            }

            // Yerelde yoksa Wikipedia
            addMessage("İşleniyor...", 'bot');
            const info = await fetchWikipedia(val);
            chatBox.lastElementChild.remove();
            
            if (info) {
                addMessage(info, 'bot');
            } else {
                addMessage("Üzgünüm, bu sorguyu şu an tam olarak çözümleyemedim. Lütfen soruyu farklı bir şekilde sormayı deneyin.", 'bot');
            }
        }

        sendBtn.addEventListener('click', handleAction);
        userInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') handleAction(); });
        document.getElementById('clearChat').addEventListener('click', showWelcomeMessage);
        window.onload = showWelcomeMessage;
    </script>
</body>
</html>

